<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>游客用户页面</title>
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">
    <link href="/static/css/index.css" rel="stylesheet">
  <style type="text/css">
  	* {
  		margin: 0px;
  		padding: 0px;
  	}
    body {
        background-color: #cccccc8f; 
    }
  </style>
  <script type="text/javascript">

    function addHost(elem) {
        var html = "";
        html += '<div class="item"><div class="item-nav" style="height: 36px">';
        html += '<button class="remove" onclick="removeAdd(this)">×</button></div>';
        html += '<div class="item-content"><ul class="item-li">';
        html += '<li class="li-add">hostName:<span contenteditable="true" class="hostName span-edit"></span></li>';
        html += '<li class="li-add">Ip:<span contenteditable="true" class="hostIp span-edit"></span></li>';
        html += '<li class="li-add">Port:<span contenteditable="true" class="hostPort span-edit"></span></li>';
        html += '</ul><div class="alter-info">';  
        html += '<button onclick="addHostSubmit(this)" class="btn btn-primary" name="submit">submit</button>';   
        html += '<button onclick="removeAdd(this)" class="btn btn-warning">Abort</button>';       
        html += '</div></div></div>';
        $(".content-add").before(html);
        $(".li-add").css("border-bottom","none"); 
        $(".hostName[contenteditable='true']").focus();
    }
    function addHostSubmit(elem){
        var item = $(elem).parents(".item-content");
        var hostName = item.find(".hostName").text();
        var hostIp = item.find(".hostIp").text();
        var hostPort = item.find(".hostPort").text();
        data = {'hostName': hostName, 'hostIp': hostIp, 'hostPort': hostPort};
        //alert(hostName)
        //alert(hostIp)
        //alert(hostPort)
        postRequest("/addHost/",data,true,addHostResult);
    }

    function addHostResult(ret) {
        if(ret['ret'] == true){
            alert("add host success!");
            location.reload()
        }else{
            alert("add host error!");
            location.reload()
        }
    }

    function alterHost(elem) {
        var item = $(elem).parents(".item").children().eq(1).children(".item-li").find("li");
        var itemBtn = $(elem).parents(".item").children().eq(1).children(".alter-info");
        item.children("span").addClass("span-edit");
        item.children("span").attr("contenteditable","true");
        item.css("border-bottom","none");
        item.filter(".enter-li").css("display","none");
        itemBtn.css("display","flex");
    }

    function alterSubmit(elem){
        var item = $(elem).parents(".item-host");
        var hostId = item.parents(".item").attr("data-tid");
        var hostName = item.find(".hostName").text();
        var hostIp = item.find(".hostIp").text();
        var hostPort = item.find(".hostPort").text();
        data = {'hostId':hostId, 'hostName': hostName, 'hostIp': hostIp, 'hostPort': hostPort};
        //alert(hostId)
        //alert(hostIp)
        //alert(hostPort)
        postRequest("/updateHost/",data,true,alterHostResult);
    }

    function alterHostResult(ret){
        if(ret['ret'] == true){
            alert("alter Host is success!");
            location.reload()
        }else{
            alert("alter Host is error!");
            location.reload()
        }
    }
    function delHost(elem) {
        //comfirm to delete host?
       var reply = confirm("are you sure to delete?")
       if(reply == true){
            var hostId = $(elem).parents(".item").attr("data-tid");
            //alert(hostId);
            data = {'hostId': hostId}
            postRequest("/delHost/",data,true,delHostResult);
        }else{
            alert("you are abotered it!")
        }
    }
    function delHostResult(ret){
        if(ret['ret'] == true){
            alert("delete host success!");
            location.reload()
        }else {
            alert("delete host error!");
        }
    }
    function alterReset(elem) {
        var items = $(elem).parent().parent().find(".item-li span");
        items.text("");
    }
    function alterAbort(elem) {
        location.reload()
    }
    function removeAdd(elem) {
        $(elem).parents(".item").remove();
    }

function filterHost() {
    var keyWords = $("input[name='sinput']").val();
    //alert(keyWords)
    getRequest("/filterHost/", "keyWords="+keyWords, true, filterHostResult);
}
function enterSearch(){
    $("input[name = 'sinput']").keydown(function(event){  
        if(event.which == "13")      
            filterHost(); 
    })
}
function filterHostResult(ret) {
    if(ret) {
        var newDoc = document.open("text/html", "replace");
        newDoc.write(ret);
        newDoc.close();
    }
}
   /* function btnClick(){
        $("btn-fade").click(function(){
            $("this").css("background-color","#00f");
        });
    }*/
  </script>
  </head>
  <body>
    <nav style="display:flex">
        <div style="width: 200px;padding: 20px;" class="right-info">
            <button type="text" onclick="userRegister()" class="btn btn-info" style="float:right;color:white;margin-left: 20px;mar">注册？</button>
            <button type="text" onclick="userLogin()" class="btn btn-primary" style="float: right;color:white;"><span class="glyphicon glyphicon-user" style="float:left;" aria-hidden="true"></span>登录</button>         
        </div>
        <div style="flex: 1;" class="right-info">
        <div class="container-fluid text-center text-md-left">
            <div class="row">
                <div class="col-md-8">
                    <h5 class="text-uppercase">手机售后服务平台</h5>
                    <p style="padding:10px 20px;">专业手机设备售后服务平台，通过整合线上线下相关资源，提供进口、国产等主流机型的专业售后工单服务。</p>
                </div>
                <div class="col-md-4" style="text-align: left;">
                    <h5 class="text-uppercase">联系我们</h5>
                    <ul class="list-unstyled" >
                        <li>
                            <a href="javascript:void(0);"><span class="glyphicon glyphicon-calendar" aria-hidden="true"></span></a><span>2018年4月10号</span>
                        </li>
                        <li>
                            <a href="javascript:void(0);"><span class="glyphicon glyphicon-earphone" aria-hidden="true"></span></a><span>18829298880</span>
                        </li>
                        <li>
                            <a href="javascript:void(0);"><span class="glyphicon glyphicon-map-marker" aria-hidden="true"></span></a><span>西安市金花南路5号理工大厦</span>
                        </li>
                    </ul>
                </div>
                </div>
        </div>
        </div>
    </nav>
    <div class="content">
        <div style="background-color:#337ab7;padding:20 0px;">
        <ul class="nav nav-pills nav-justified">
            <li role="presentation" class="page-info">
                <a style="color:black;" href="/index/home">首页</a>
            </li>
            <li role="presentation" class="phones-info" >
                <a style="color:black;" href="/index/phones_list">服务手机</a>
            </li>
            <li role="presentation" class="servers-info">
                <a style="color:black;" href="/index/servers_list">客服人员</a>
            </li>
            <li role="presentation" class="about-us">
                <a style="color:black;" href="/index/about">关于我们</a>
            </li>
        </ul>
        </div>
        <div class="content-info" style="">
             {% block content %} 
             {% endblock %}
            </div>
        </div>
    <script src="/static/js/jquery-1.12.4.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <script src="/static/js/ajax.js"></script>
    <script src="/static/js/text-utils.js"></script>
    <script src="/static/js/index.js"></script>
    <script>
    $(function () {
            $("input[name = 'username']").keydown(function (event) {
                if (event.which == "13")
                    $("input[name = 'password']").focus()
            })
            $("input[name = 'password']").keydown(function (event) {
                if (event.which == "13")
                    checkLogin();
            })
            $("input[name = 'submit']").click(function () {
                checkLogin();
            });
        })
    </script>
  </body>
</html>